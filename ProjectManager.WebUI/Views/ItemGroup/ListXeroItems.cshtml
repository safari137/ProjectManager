@model IEnumerable<ProjectManager.Models.Xero.XeroItem>
@{
    ViewBag.Total = 0;
    ViewBag.CostTotal = 0;
}
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.ItemCode)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ItemName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Quantity)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Cost)
        </th>
        <th>
            Total Cost
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SalePrice)
        </th>
        <th>
            Total Price
        </th>
        <th></th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.ItemCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ItemName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Quantity)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Cost)
            </td>
            <td>
                @{
                    var costTotal = item.Cost*item.Quantity;
                    ViewBag.CostTotal += costTotal;
                    @Html.DisplayFor(model => costTotal)
                }
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SalePrice)
            </td>
            <td>
                @{
                    var total = item.SalePrice*item.Quantity;
                    ViewBag.Total += total;
                    @Html.DisplayFor(model => total)
                }
            </td>
            <td>
                @Html.ActionLink("Delete", "XeroItemDelete", new {id = item.XeroItemCodeId})
            </td>
        </tr>
    }
</table>
<br/>
<p>@Html.Raw("Total Cost : " + ViewBag.CostTotal)</p>
<p>@Html.Raw("Total Price: " + ViewBag.Total)</p>

